{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'products/css/products.css' %}">
{% endblock %}

{% block title %}Product Management | Bloom and Brew{% endblock %}

{% block content %}
<section class="product-admin py-5">
  <div class="container">
    <h2 class="text-center mb-4">Manage Products</h2>

    <div class="d-flex justify-content-end mb-3">
      <a href="{% url 'add_product' %}" class="btn btn-success">+ Add New Product</a>
    </div>

    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>Name</th>
          <th>Category</th>
          <th>Price</th>
          <th>Stock</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for product in products %}
        <tr>
          <td>{{ product.name }}</td>
          <td>{{ product.get_category_display }}</td>
          <td>
            {% if product.has_discount %}
              <strong>€{{ product.special_offer_price }}</strong><br>
              <small class="text-muted text-decoration-line-through">€{{ product.price }}</small>
            {% else %}
              €{{ product.price }}
            {% endif %}
          </td>
          <td>{{ product.stock }}</td>
          <td>
            <a href="{% url 'edit_product' product.id %}" class="btn btn-sm btn-warning">Edit</a>
            <a href="{% url 'delete_product' product.id %}" class="btn btn-sm btn-danger">Delete</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-center">No products found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}
